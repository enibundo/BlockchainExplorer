#pragma checksum "/home/eni/Documents/code/BlockchainExplorer/ChainExplorerWeb/Pages/ChainRider.razor" "{ff1816ec-aa5e-4d10-87f7-6f4963833460}" "3976c1aac8341587cf4baeaea9e33ef595ac39a0"
// <auto-generated/>
#pragma warning disable 1591
#pragma warning disable 0414
#pragma warning disable 0649
#pragma warning disable 0169

namespace ChainExplorerWeb.Pages
{
    #line hidden
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Threading.Tasks;
    using Microsoft.AspNetCore.Components;
#nullable restore
#line 1 "/home/eni/Documents/code/BlockchainExplorer/ChainExplorerWeb/_Imports.razor"
using System.Net.Http;

#line default
#line hidden
#nullable disable
#nullable restore
#line 2 "/home/eni/Documents/code/BlockchainExplorer/ChainExplorerWeb/_Imports.razor"
using Microsoft.AspNetCore.Authorization;

#line default
#line hidden
#nullable disable
#nullable restore
#line 3 "/home/eni/Documents/code/BlockchainExplorer/ChainExplorerWeb/_Imports.razor"
using Microsoft.AspNetCore.Components.Authorization;

#line default
#line hidden
#nullable disable
#nullable restore
#line 4 "/home/eni/Documents/code/BlockchainExplorer/ChainExplorerWeb/_Imports.razor"
using Microsoft.AspNetCore.Components.Forms;

#line default
#line hidden
#nullable disable
#nullable restore
#line 5 "/home/eni/Documents/code/BlockchainExplorer/ChainExplorerWeb/_Imports.razor"
using Microsoft.AspNetCore.Components.Routing;

#line default
#line hidden
#nullable disable
#nullable restore
#line 6 "/home/eni/Documents/code/BlockchainExplorer/ChainExplorerWeb/_Imports.razor"
using Microsoft.AspNetCore.Components.Web;

#line default
#line hidden
#nullable disable
#nullable restore
#line 7 "/home/eni/Documents/code/BlockchainExplorer/ChainExplorerWeb/_Imports.razor"
using Microsoft.JSInterop;

#line default
#line hidden
#nullable disable
#nullable restore
#line 8 "/home/eni/Documents/code/BlockchainExplorer/ChainExplorerWeb/_Imports.razor"
using ChainExplorerWeb;

#line default
#line hidden
#nullable disable
#nullable restore
#line 9 "/home/eni/Documents/code/BlockchainExplorer/ChainExplorerWeb/_Imports.razor"
using ChainExplorerWeb.Shared;

#line default
#line hidden
#nullable disable
#nullable restore
#line 3 "/home/eni/Documents/code/BlockchainExplorer/ChainExplorerWeb/Pages/ChainRider.razor"
using System.Net;

#line default
#line hidden
#nullable disable
#nullable restore
#line 4 "/home/eni/Documents/code/BlockchainExplorer/ChainExplorerWeb/Pages/ChainRider.razor"
using ChainExplorer.Script.Validator;

#line default
#line hidden
#nullable disable
#nullable restore
#line 5 "/home/eni/Documents/code/BlockchainExplorer/ChainExplorerWeb/Pages/ChainRider.razor"
using Microsoft.AspNetCore.WebUtilities;

#line default
#line hidden
#nullable disable
#nullable restore
#line 7 "/home/eni/Documents/code/BlockchainExplorer/ChainExplorerWeb/Pages/ChainRider.razor"
using global::ChainExplorer.Reader;

#line default
#line hidden
#nullable disable
#nullable restore
#line 8 "/home/eni/Documents/code/BlockchainExplorer/ChainExplorerWeb/Pages/ChainRider.razor"
using global::ChainExplorer.Model;

#line default
#line hidden
#nullable disable
    [Microsoft.AspNetCore.Components.RouteAttribute("/blockexplorer")]
    public partial class ChainRider : Microsoft.AspNetCore.Components.ComponentBase
    {
        #pragma warning disable 1998
        protected override void BuildRenderTree(Microsoft.AspNetCore.Components.Rendering.RenderTreeBuilder __builder)
        {
        }
        #pragma warning restore 1998
#nullable restore
#line 62 "/home/eni/Documents/code/BlockchainExplorer/ChainExplorerWeb/Pages/ChainRider.razor"
       

    
    private string BlockId { get; set; }
    private Block? Block;
    private readonly IList<Transaction> _transactions = new List<Transaction>();
    private bool BlockParseRequested { get; set; } = false;
    
    private void TransactionScript(Transaction trx)
    {
        var script = BitConverter.ToString(trx.Script).Replace("-", string.Empty);
        NavigationManager.NavigateTo($"/trxscript?script={script}", true); 
    }

    private string PrintByteArr(byte[] arr)
    {
        return BitConverter.ToString(arr).Replace("-", string.Empty).ToLower();
    }

    private async void ParseBlock()
    {
        BlockParseRequested = true;

        // get ascii-hex from blockchain.info,
        // todo: run and query own node
        var url = $"https://blockchain.info/block/{BlockId}?format=hex";

        var objResponse = WebRequest.Create(url).GetResponse();
        var reader = new AsciiFileBinaryReader(new HexReader(), objResponse.GetResponseStream());
        var loggedReader = new LoggedBinaryReader(reader);
        
        Block = BitcoinReader.ReadBlock(loggedReader, (t =>
        {
            _transactions.Add(t);
        }));
    }

#line default
#line hidden
#nullable disable
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private NavigationManager NavigationManager { get; set; }
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private TransactionValidator TransactionValidator { get; set; }
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private BitcoinReader BitcoinReader { get; set; }
    }
}
#pragma warning restore 1591
